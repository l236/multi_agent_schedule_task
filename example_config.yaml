name: "Contract Analysis Pipeline"
description: "Automated pipeline for parsing contracts, retrieving regulations, and generating analysis reports"

steps:
  - id: parse_contract
    name: "Parse Contract Document"
    tool: "doc_parser"
    parameters:
      file_path: "sample_contract.txt"
    retry_count: 2
    retry_delay: 1.0
    fallback_tools: ["ocr_parser"]

  - id: retrieve_regulations
    name: "Retrieve Relevant Regulations"
    tool: "retrieval"
    parameters:
      query: "contract law regulatory compliance"
    dependencies: ["parse_contract"]
    retry_count: 3
    retry_delay: 2.0

  - id: generate_analysis
    name: "Generate Analysis Report"
    tool: "generation"
    parameters:
      type: "analysis"
      data:
        subject: "Contract Compliance Analysis"
    dependencies: ["parse_contract", "retrieve_regulations"]
    condition: "dep_retrieve_regulations"  # Only run if retrieval succeeded
    retry_count: 1

  - id: generate_summary
    name: "Generate Executive Summary"
    tool: "generation"
    parameters:
      type: "summary"
      data:
        key_points: ["Contract parsed successfully", "Regulations retrieved", "Analysis completed"]
    dependencies: ["generate_analysis"]

parallel_groups:
  - ["parse_contract"]  # Can run in parallel with other independent steps
  - ["retrieve_regulations", "generate_analysis"]  # These can run in parallel after parse_contract
